{% macro render_transparent_builtin_scalar_property(m, name_prefix, access_prefix) -%}
@property
def {{ name_prefix }}{{ m.name }}(self):
    return {{ access_prefix }}.{{ m.name }}
@{{ name_prefix }}{{ m.name }}.setter
def {{ name_prefix }}{{ m.name }}(self, {{ m.type.cy_type }} val):
    {{ access_prefix }}.{{ m.name }} = val
{% endmacro %}


{% macro render_transparent_builtin_subtype_properties(m, name_prefix, access_prefix) -%}
{% for subm in m.type.c_struct_members %}
{%   if subm.is_in_struct %}
{%     if subm.type.is_scalar %}
{{ render_transparent_builtin_scalar_property(subm, name_prefix, access_prefix) }}
{%     else %}
{{ render_transparent_builtin_subtype_properties(subm, "{}_{}".format(name_prefix, subm.name), "{}.{}".format(access_prefix, subm.name)) }}
{%     endif %}
{%   endif %}
{% endfor %}
{% endmacro %}


{% macro render_member(builtin, m) %}
{% if not m.is_in_struct %}
{# Property unrelated to the builtin internal structure, must use Godot API method to access it #}
@property
def {{ m.name }}(self):
    return {{ builtin.cy_type }}.get_{{ m.name }}(self)
@{{ m.name }}.setter
def {{ m.name }}(self, {{ m.type.cy_type }} val{{ "" if m.type.is_scalar else " not None"}}):
    {{ builtin.cy_type }}.set_{{ m.name }}(self, val)
{% else %}
{# Property that is contains in the builtin C structure #}

{%   if m.type.is_scalar %}

{# Scalar type in the C structure (i.e. `Vector2.x`) #}
{{ render_transparent_builtin_scalar_property(m, "", "self._gd_data") }}

{%   else %}

{# Builtin type in the C structure (i.e. `Rect2.position` with position being a `Vector2`) #}
{# In GDScript doing `rect2.position.x = 42` modifies `rect2`, that means `rect2.position` #}
{# is a proxy object on the content of `rect2`, this is cumbersome to do in Python (and make #}
{# thing slower) so we replace this by property on the subtype members: `rect2.position_x` #}
{{ render_transparent_builtin_subtype_properties(m, "{}_".format(m.name), "self._gd_data.{}".format(m.name)) }}

{# Note the member is also exposed as set/get functions (making it clear it works on copies) #}
{# defined in the .pxd among the others class methods #}

{%   endif %}
{% endif %}
{% endmacro %}
